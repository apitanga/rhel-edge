---
# tasks file for edge-configure-vip
  - set_fact:
      int_ip: "{{ hostvars[item].ansible_host }}/24"
    when: not add_vip
  
  - set_fact:
      int_ip: "{{ hostvars[item].vip }}/24"
    when: add_vip
  


  - name: Add an Ethernet connection with static IP configuration
    nmcli:
      conn_name: "{{ interface_name }}"
      ifname: "{{ interface_name }}"
      ip4: "{{ int_ip }}"
      type: ethernet
      state: present
  
  - shell: nmcli con up {{ interface_name }}